<div class="notifications-container">
    <div class=".col-6 .col-md-4 analytics-cards">
      <div class="analytics-card">
        <p>Notifications in last 7 days:</p>
        <%= line_chart Notification.where(user: current_user)
                                   .group_by_day(:accessed_at)
                                   .count, empty: "No data",
                                   xmin: Date.today - 7,
                                   xmax: Date.today,
                                   xtitle: "Last 7 days",
                                   ytitle: "# of notifications",
                                   curve: false,
                                   points: false,
                                   loading: "Fetching notifications..." %>
      </div>
    </div>

    <div class=".col-6 .col-md-4 notification-cards">
      <% if @notifications.any? %>
        <% @notifications.each do |notification| %>
        <div type="button" data-bs-toggle="modal" data-bs-target="#notification-<%= notification.id %>">
          <div class="notification-card">
            <div class="card-notification-infos justify-content-center">
              <p><%= notification.description %></p>
            </div>
            <div class="card-notification-site">
              <div class="card-notification-site-url">
                <h2>URL:</h2>
                <p><%= notification.site.url  %></p>
              </div>
              <div class="card-notification-site-accessdate">
                <h2> Accessed at:</h2>
                <p><%= notification.accessed_at.strftime("%F %H:%M")  %></p>
              </div>
            </div>
          </div>
        <!-- Modal -->
        <%= render 'modal', notification: notification %>
        </div>
        <% end %>
      <% else %>
        <h2>No notifications yet.</h2>
      <% end %>
      <!--new site button-->
      <div class="list-new-entry">
        <button type="button" class="new-site scale-btn btn btn-light" data-bs-toggle="modal" data-bs-target="#new">
          <i class="fas fa-plus-square"></i>
        </button>
      </div>
      <%= render 'sites/new', site: @new_site %>
    </div>

    <div class=".col-6 .col-md-4 profile-card">
      <div class="profile-card-content">
      <% if current_user.care_receiver.nil? %>
      <%= render 'current_user_profile' %>
      <% else %>
      <%= render 'care_receiver_profile' %>
      <% end %>
      </div>
    </div>
  </div>
</div>
